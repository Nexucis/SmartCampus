<!DOCTYPE html>
<html>
    <head>
        <title>Configuration</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>
    <body>
        <h1>Configuration</h1>

        <span class="nav nav-pills nav-stacked" data-toggle="collapse" data-target="#div_sensors">
        </span>

        <div class="collapse in">
            <div id="div_sensors" class="panel-body">
            </div>
        </div>
        <script type="text/javascript">
        $.getJSON('/api/SensorsWireless', function(data){
             var i = 0;
             var item = data.payload[i];
             var balise = "";
             var balise2 = "";
             console.log("generation de la page de config");
             $("#div_sensors").append('<table class="table table-striped" id="test">');
             $("#test").append('<th>Name</th>');
             $("#test").append('<th>Longitude</th>');
             $("#test").append('<th>Latitude</th>');
             $("#test").append('<th>Clef AES</th>');
             $("#test").append('<th data-field="operate" data-formatter="operateFormatter" data-events="operateEvents">Item Operate</th>');
             while (item) {
                 console.log(item.name);
                 balise = "c"+i;
                 balise2 = "#c"+i;
                 truc = 
                 $("#test").append('<tr id="'+balise+'">');
                 $(balise2).append("<td>" + item.name +"</td>");
                 $(balise2).append("<td>" + item.longitude +"</td>");
                 $(balise2).append("<td>" + item.latitude +"</td>");
                 $(balise2).append("<td>" + item.clefAES +"</td>");
                 $(balise2).append('<td>'+
            '<a class="like" href="javascript:void(0)" title="Like">'+
                '<i class="glyphicon glyphicon-heart"></i>'+
            '</a>'+
            '<a class="edit ml10" href="javascript:void(0)" title="Edit">'+
                '<i class="glyphicon glyphicon-edit"></i>'+
            '</a>'+
            '<a class="remove ml10" href="javascript:void(0)" title="Remove">'+
                '<i class="glyphicon glyphicon-remove"></i>'+
            '</a>'
            +'</td>');
                 i++;
                 item = data.payload[i];
             }
             $("#div_sensors").append('</table>');
        });

    window.operateEvents = {
        'click .like': function (e, value, row, index) {
            alert('You click like icon, row: ' + JSON.stringify(row));
            console.log(value, row, index);
        },
        'click .edit': function (e, value, row, index) {
            alert('You click edit icon, row: ' + JSON.stringify(row));
            console.log(value, row, index);
        },
        'click .remove': function (e, value, row, index) {
            alert('You click remove icon, row: ' + JSON.stringify(row));
            console.log(value, row, index);
        }
    };

        </script>
    </body>
</html>
